
# Smart-Embedded-Fan 
ê¸ˆì˜¤ê³µê³¼ëŒ€í•™êµ ì„ë² ë””ë“œì‹œìŠ¤í…œ ê¸°ë§í”„ë¡œì íŠ¸
ë°”ëŒì„ ë„˜ì–´ ê¸°ìˆ ë¡œ: ìŠ¤ë§ˆíŠ¸ ì„ í’ê¸°

## ğŸ’¡ ì•„ì´ë””ì–´ ì†Œê°œ
> ### ğŸ® ë¦¬ëª¨ì»¨ ì œì–´ ë° ìƒíƒœ í‘œì‹œ
- ë¼ì¦ˆë² ë¦¬ íŒŒì´ì™€ ë¼ì¦ˆë² ë¦¬ íŒŒì´ ê°„ì˜ TCP í†µì‹ ì„ ì´ìš©í•œë‹¤.
- ì„ í’ê¸°ì˜ ì „ì›, ë°”ëŒ ì„¸ê¸° ì¡°ì ˆ, íƒ€ì´ë¨¸ ì¡°ì‘, ìë™ ëª¨ë“œ ì„¤ì •ê³¼ ê°™ì€ ì£¼ìš” ê¸°ëŠ¥ì„ ì¡°ì‘í•œë‹¤.
- ë°”ëŒ ì„¸ê¸°, ìë™ ëª¨ë“œ, íƒ€ì´ë¨¸ ì¡°ì‘ ìƒíƒœë¥¼ LEDì™€ ì„¸ë¸ ì„¸ê·¸ë¨¼íŠ¸ ë””ìŠ¤í”Œë ˆì´ë¡œ í‘œì‹œí•œë‹¤.

> ### ğŸ“± ìŠ¤ë§ˆíŠ¸í° ì œì–´
- ë¦¬ëª¨ì»¨ ë¶„ì‹¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ UART ë¸”ë£¨íˆ¬ìŠ¤ í†µì‹  ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.
- ì„ í’ê¸°ì˜ ì „ì›, ë°”ëŒ ì„¸ê¸° ì¡°ì ˆ, íƒ€ì´ë¨¸ ì¡°ì‘, ìë™ ëª¨ë“œ ì„¤ì •ê³¼ ê°™ì€ ì£¼ìš” ê¸°ëŠ¥ì„ ì¡°ì‘í•œë‹¤.

> ### ğŸ§‘â€ğŸ’» ì›¹ ê¸°ë°˜ ì œì–´
- ê±°ë¦¬ì— ë”°ë¥¸ ì¡°ì‘ í•œê³„ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Node.jsë¥¼ ì´ìš©í•˜ì—¬ Web ê¸°ë°˜ ì œì–´ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ë‹¤.
- ë°”ëŒ ì„¸ê¸°, ìë™ ëª¨ë“œ, íƒ€ì´ë¨¸ ì¡°ì‘ ìƒíƒœë¥¼ Webì„ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ì„ í’ê¸°ì˜ ì „ì›, ë°”ëŒ ì„¸ê¸° ì¡°ì ˆ, íƒ€ì´ë¨¸ ì¡°ì‘, ìë™ ëª¨ë“œ ì„¤ì •ê³¼ ê°™ì€ ì£¼ìš” ê¸°ëŠ¥ì„ ì¡°ì‘í•œë‹¤.

> ### ğŸ¥ ê°ì²´ ì¸ì‹ ë° ì¶”ì 
- íœí‹¸íŠ¸ ì„¼ì„œì™€ Caffe í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ëŒ ì–¼êµ´ì„ ì¶”ì í•œë‹¤.
- íšŒì „ ìë™ ëª¨ë“œ ì„¤ì • ì‹œ ì‹¤í–‰ëœë‹¤.
- ë°”ëŒ ë°©í–¥ì„ ì‚¬ìš©ìë¡œ ì¼ì •í•˜ê²Œ íƒ€ì¼“íŒ…í•˜ì—¬ ì¶”ì í•œë‹¤.

> ### ğŸ“ ê±°ë¦¬ ê¸°ë°˜ ë°”ëŒ ì œì–´
- ì´ˆìŒíŒŒ ì„¼ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì™€ ì„ í’ê¸° ê°„ ê±°ë¦¬ë¥¼ ê³„ì‚°í•œë‹¤.
- ë°”ëŒ ì„¸ê¸° ìë™ ëª¨ë“œ ì„¤ì • ì‹œ ì‹¤í–‰ëœë‹¤.
- ì‚¬ìš©ìì™€ ì„ í’ê¸° ê°„ ê±°ë¦¬ì— ë¹„ë¡€í•˜ì—¬ ë°”ëŒ ì„¸ê¸°ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.

> ### ğŸŒ¡ï¸ ì˜¨ìŠµë„ ê¸°ë°˜ ë°”ëŒ ì œì–´
- ì˜¨ìŠµë„ ì„¼ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜¨ìŠµë„ë¥¼ ìˆ˜ì¹˜ë¡œ ê³„ì‚°í•œë‹¤.
- ë°”ëŒ ì„¸ê¸° ìë™ ëª¨ë“œ ì„¤ì • ì‹œ ì‹¤í–‰ëœë‹¤.
- í…ŒìŠ¤íŠ¸ì— ë”°ë¼ ìˆ˜ì¹˜ë¥¼ ì¡°ì •í•˜ì—¬ ì˜¨ìŠµë„ì— ë¹„ë¡€í•˜ì—¬ ë°”ëŒ ì„¸ê¸°ë¥¼ ìë™ìœ¼ë¡œ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.

> ### â° íƒ€ì´ë¨¸ ê¸°ëŠ¥
- ì„ í’ê¸°ì— ë‚´ì¥ëœ íƒ€ì´ë¨¸ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì‹œê°„ì— ì„ í’ê¸°ê°€ ìë™ìœ¼ë¡œ ì¢…ë£Œë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
- íƒ€ì´ë¨¸ ëª¨ë“œ ì„¤ì • ì‹œ ì‹¤í–‰ëœë‹¤.

## ğŸ”§ ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°ë„ 
![image](https://github.com/Sonny-Kor/smart-embedded-fan/assets/46300191/be3e6994-ef94-46d0-8e4b-818f452c1ad2)

## ğŸ—ºï¸ íšŒë¡œêµ¬ì¡°ë„
![image](https://github.com/Sonny-Kor/smart-embedded-fan/assets/46300191/b432af97-8003-47c7-a9f9-a7141962f961)

## ğŸ”’ï¸ ì œí•œ ì¡°ê±´ êµ¬í˜„ ë‚´ìš© 
![image](https://github.com/bini59/Smart-Embedded-Fan/assets/118044367/36d2237f-e4a0-4fe1-bd81-f78fc2bccd36)


### ë©€í‹°í”„ë¡œì„¸ìŠ¤ - IPC
- ì´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•œ ë©€í‹°í”„ë¡œì„¸ìŠ¤ë¡œëŠ” ì£¼ë¡œ `ì„¼ì„œë¥¼ ì½ëŠ” í”„ë¡œì„¸ìŠ¤` ì™€ `í†µì‹ ì„ ìœ„í•œ í”„ë¡œì„¸ìŠ¤`ë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤. 
- ì•„ë˜ì˜ ì½”ë“œëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ í†µì‹ ì„ ìœ„í•´ ìƒì„±ëœ í”„ë¡œì„¸ìŠ¤ ì˜ˆì œì´ë‹¤.
> ###  TCP/IP ì†Œì¼“ì„ ì‚¬ìš©í•œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì— ë°ì´í„° ì „ë‹¬ 
```c
// service_1/bluetooth.c

// ì†Œì¼“ ìƒì„±
if ((server_fd = socket(AF_INET, SOCK_STREAM, 0)) == 0) {
    perror("socket failed");
    exit(EXIT_FAILURE);
}

// ì†Œì¼“ ì˜µì…˜ ì„¤ì •
if (setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR | SO_REUSEPORT, &opt, sizeof(opt))) {
    perror("setsockopt");
    exit(EXIT_FAILURE);
}

address.sin_family = AF_INET;
address.sin_addr.s_addr = INADDR_ANY;
address.sin_port = htons(PORT);

// ì†Œì¼“ì— ì£¼ì†Œ ë°”ì¸ë”©
if (bind(server_fd, (struct sockaddr *)&address, sizeof(address))<0) {
    perror("bind failed");
    exit(EXIT_FAILURE);
}

// ì„œë²„ ì†Œì¼“ ëŒ€ê¸°
if (listen(server_fd, 3) < 0) {
    perror("listen");
    exit(EXIT_FAILURE);
}
```
- ì„œë²„ëŠ” TCP/IP ì—°ê²°ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì™€ ì—°ê²°í•œ í›„ ëŒ€ê¸°í•œë‹¤.
> ### POSIX ë©”ì‹œì§€ íë¥¼ í†µí•œ í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ (IPC)
```c
// service_1/bluetooth.c

// ë©”ì‹œì§€ í ì˜¤í”ˆ
mq = mq_open(mq_name, O_WRONLY);
if(mq == (mqd_t)-1) {
    perror("mq_open");
    exit(EXIT_FAILURE);
}
 while(1) {
        printf("Waiting for new connection...\n");
        // í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ìˆ˜ë½
        if ((new_socket = accept(server_fd, (struct sockaddr *)&address, (socklen_t*)&addrlen))<0) {
            perror("accept");
            continue;
        }
        printf("Connection established\n");
        // í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ 
        while(1) {
            memset(buffer, 0, 1024);
            int valread = read(new_socket, buffer, 1024);
            if(valread == 0) {
                printf("Client disconnected\n");
                break;
            }
            printf("Received: %s\n", buffer);
            
            // ë©”ì‹œì§€ íë¡œ ë°ì´í„° ì „ì†¡
            if(mq_send(mq, buffer, strlen(buffer), 0) == -1) {
                perror("mq_send");
                break;
            }
        }

        close(new_socket);
    }

    // ë©”ì‹œì§€ í ë‹«ê¸°
    mq_close(mq);
```
- í´ë¼ì´ì–¸íŠ¸ê°€ ì†Œì¼“ì„ í†µí•´ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ ë©”ì‹œì§€ íë¡œ ë©”ì¸í”„ë¡œì„¸ìŠ¤ì—ê²Œ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.
### Thread - Mutex

> ### ë©”ì¸ ì„œë²„ì—ì„œ ë©”ì„¸ì§€ í ì½ê¸° ìŠ¤ë ˆë“œ ìƒì„±
```c
// service_1/main_server.c  421:422

// ë©”ì‹œì§€ í ì½ê¸° ìŠ¤ë ˆë“œ ìƒì„±
pthread_create(&receive_thread, NULL, recv_sensor_data, NULL);
```
- Mainì„œë²„ì—ì„œ ë‹¤ë¥¸ì‘ì—…(ë‹¤ë¥¸ ë©”ì„¸ì§€ íë¡œ ë¶€í„° ë©”ì„¸ì§€ë¥¼ ë°›ëŠ” ì‘ì—…) message queueë¡œ ë¶€í„° ë°›ì€ ë©”ì„¸ì§€ë¥¼ ì½ê¸° ìœ„í•œ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•œë‹¤.

> ### ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ë©”ì„¸ì§€ í ì½ê¸°, mutexë¥¼ ì´ìš©í•œ ë³€ìˆ˜ ì ‘ê·¼ ì œí•œ
```c
// service_1/main_server.c  246:265 

while(1) {
    str_len = mq_receive(mq, buf, sizeof(buf), NULL);
    if (str_len == -1) {
        perror("ë©”ì‹œì§€ í ì½ê¸° ì‹¤íŒ¨");
        continue;
    }
    // printf("buf : %s\nbuf[0] : %c", buf, buf[0]);

    pthread_mutex_lock(&lock_receive);
    buf[str_len] = '\0';
    if (buf[0] == 'D') {
        distance = atof(buf + 2);
    } 
    else if (buf[0] == 'H') {
        // printf("%s\n", buf);
        sscanf(buf + 2, "%f %f", &humidity, &temperature);
    }
    pthread_mutex_unlock(&lock_receive);
    usleep(1000); // 1ì´ˆ ëŒ€ê¸°
}
```
- ìƒì„±ëœ ìŠ¤ë ˆë“œì—ì„œ ë©”ì„¸ì§€ íë¡œ ë¶€í„° ë©”ì„¸ì§€ë¥¼ ì½ì–´ì˜¤ê³ , ë©”ì„¸ì§€ë¥¼ íŒŒì‹±í•˜ì—¬ distance, humidity, temperature ë³€ìˆ˜ì— ì €ì¥í•œë‹¤. 
- ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ë³€ìˆ˜ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ mutexë¥¼ ì‚¬ìš©í•˜ì—¬ ì ê¸ˆì„ ê±¸ì–´ì¤€ë‹¤.

### Multi Processing

> ### forkë¥¼ ì´ìš©í•œ í”„ë¡œì„¸ìŠ¤ ë¶„ë¦¬
```c
// service_1/main_server.c  211:220

void fork_ultrasonic_sensor() {
    pid_t pid = fork();
    if (pid == 0) {
        // ì´ˆìŒíŒŒ ì„¼ì„œ í”„ë¡œê·¸ë¨ ì‹¤í–‰
        execlp("./ultrasonic_sensor", "ultrasonic_sensor", NULL);
        exit(EXIT_FAILURE);
    }
}

void fork_dht_sensor() {
    pid_t pid = fork();
    if (pid == 0) {
        // DHT ì„¼ì„œ í”„ë¡œê·¸ë¨ ì‹¤í–‰
        execlp("./dht_sensor", "dht_sensor", NULL);
        exit(EXIT_FAILURE);
    }
}

// service_1/main_server.c  417:419

// ì´ˆìŒíŒŒ ì„¼ì„œ, DHT ì„¼ì„œ í”„ë¡œê·¸ë¨ ì‹¤í–‰
fork_ultrasonic_sensor();
fork_dht_sensor();

```
- ë‘ í”„ë¡œê·¸ë¨ì„ í˜„ì¬ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë¶„ë¦¬í•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.




## â¤ï¸ ê°€ì‚°ì  ìš”ì†Œ
### 1. RaspberryPi-RaspberryPi

- ë¦¬ëª¨ì»¨ ë¼ì¦ˆë² ë¦¬íŒŒì´
    - ì‚¬ìš©ìì˜ ëª…ë ¹ ì…ë ¥ì„ ë°›ëŠ” ë¦¬ëª¨ì»¨ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤. ì‚¬ìš©ìëŠ” ì´ ì¥ì¹˜ë¥¼ í†µí•´ ì„ í’ê¸°ì˜ ì „ì›, ë°”ëŒ ì„¸ê¸°, íƒ€ì´ë¨¸ ì„¤ì • ë“±ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.
    - ì‚¬ìš©ìì˜ ì…ë ¥ì€ ë©”ì¸ ì„œë²„ë¡œ ì „ì†¡ë˜ì–´, í•´ë‹¹ ëª…ë ¹ì— ë”°ë¼ ì„ í’ê¸°ê°€ ì‘ë™í•˜ë„ë¡ í•œë‹¤.
- íšŒì „ìë™ëª¨ë“œ(ì–¼êµ´ì¸ì‹) ë¼ì¦ˆë² ë¦¬íŒŒì´
   - ì–¼êµ´ ì¸ì‹ ê¸°ëŠ¥ì„ ìœ„í•œ ì „ìš© ì„œë²„ë¡œ í™œìš©ëœë‹¤. ë©”ì¸ ì„œë²„ë¥¼ í†µí•´ ì‘ë™ ëª…ë ¹ì„ ë°›ìœ¼ë©´ ì‘ë™í•œë‹¤.
   - ì¹´ë©”ë¼ë¥¼ í†µí•´ ì‚¬ìš©ìì˜ ì–¼êµ´ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•˜ê³ , ì´ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒ¬(ìˆ˜í‰ íšŒì „)ê³¼ í‹¸íŠ¸(ìˆ˜ì§ íšŒì „) ê°ë„ë¥¼ ì¡°ì •í•œë‹¤.
- ì œí•œ ì¡°ê±´ êµ¬í˜„ ë‚´ìš©ì— ë¦¬ëª¨ì»¨ ë¼ì¦ˆë² ë¦¬ íŒŒì´ì— ëŒ€í•œ ë‚´ìš©ì´ ê¸°ìˆ  ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì—¬ê¸°ì„œëŠ” íšŒì „ìë™ëª¨ë“œë¥¼ ìœ„í•œ ë¼ì¦ˆë² ë¦¬ íŒŒì´ì— ëŒ€í•œ êµ¬í˜„ì„ ìƒì„¸íˆ ì„¤ëª…í•œë‹¤.

> ### Client RaspberryPi (ë©”ì¸ ì„œë²„)  - RA ê°’ì„ ì´ìš©í•œ ì†¡ì‹ 

```c
// service_1/main_server.c 64:84

void auto_rotate(bool flag){
    char buffer[BUFSIZ];
    if(flag)
        sprintf(buffer, "%c", '1'); // RA ì…ë ¥ ì‹œ, '1' ì „ì†¡
    else
        sprintf(buffer, "%c", '0'); // ê·¸ ì™¸ ê²½ìš°, '0' ì „ì†¡
    // ë©”ì‹œì§€ íë¥¼ í†µí•œ ë°ì´í„° ì „ì†¡
    if (mq_send(mq_R, buffer, strlen(buffer), 0) == -1) {
        perror("mq_send");
    }
    mq_close(mq_R);
}
```

- **`auto_rotate`** í•¨ìˆ˜ëŠ” ë©”ì¸ ì„œë²„ì—ì„œ RA ëª…ë ¹ì„ ìˆ˜ì‹ ë°›ì•˜ì„ ë•Œ, íšŒì „ìë™ëª¨ë“œë¥¼ í™œì„±í™”í•˜ê±°ë‚˜ ë¹„í™œì„±í™”í•˜ê¸° ìœ„í•´ '1' ë˜ëŠ” '0'ì„ íšŒì „ìë™ëª¨ë“œ ë¼ì¦ˆë² ë¦¬ íŒŒì´ì— ì „ì†¡í•œë‹¤.

```c
// service_1/TCP_rotate_connect.c 27:58

// TCP í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ ì„¤ì • ë° ì—°ê²°
if ((sock = socket(AF_INET, SOCK_STREAM, 0)) < 0) {
    printf("\n Socket creation error \n");
    exit(EXIT_FAILURE);
}
serv_addr.sin_family = AF_INET;
serv_addr.sin_port = htons(PORT);
if(inet_pton(AF_INET, "172.20.10.2", &serv_addr.sin_addr) <= 0) {
    printf("\nInvalid address/ Address not supported \n");
    exit(EXIT_FAILURE);
}
if (connect(sock, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) < 0) {
    printf("\nConnection Failed \n");
    exit(EXIT_FAILURE);
}

// ë°ì´í„° ì „ì†¡ ë¡œì§
char message[50];
sprintf(message, "%c", '1'); // ì˜ˆì‹œ ë°ì´í„° '1' ì „ì†¡
if (send(sock, message, strlen(message), 0) < 0) {
    printf("Failed to send message\n");
} else {
    printf("Sent: %s\n", message);
}
```

- ë©”ì¸ ì„œë²„ ë¼ì¦ˆë² ë¦¬ íŒŒì´ê°€ íšŒì „ìë™ëª¨ë“œ ë¼ì¦ˆë² ë¦¬ íŒŒì´ì— ì—°ê²°ì„ ì‹œë„í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì„ ì„¤ì •í•œë‹¤.
- **`send`** í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ˆì‹œ ë°ì´í„° ('1'ì´ë‚˜ '0')ë¥¼ ì„œë²„ì— ì „ì†¡í•œë‹¤. ì´ëŠ” ë©”ì¸ ì„œë²„ì—ì„œ íšŒì „ìë™ëª¨ë“œì˜ í™œì„±í™” ë˜ëŠ” ë¹„í™œì„±í™”ë¥¼ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.

> ### Server RaspberryPi (íšŒì „ ìë™ ëª¨ë“œ)  - ì†Œì¼“ì„ í†µí•œ ìˆ˜ì‹  ë° ì²˜ë¦¬

```python
// service_2/rotate_auto_server.py 166:201

server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind((host, port))
server_socket.listen(1)

while True:
    client_socket, addr = server_socket.accept()
    while True:
        data = client_socket.recv(1024).decode()
        if not data:
            break
        print("ìˆ˜ì‹  ë°ì´í„°: ", data)

        if data == '1':
            obj_tracking_running = True
            # ê°ì²´ ì¶”ì  ë° ì„œë³´ ì œì–´ ë¡œì§ í™œì„±í™”
        elif data == '0':
            obj_tracking_running = False
            # ê°ì²´ ì¶”ì  ë° ì„œë³´ ì œì–´ ë¡œì§ ë¹„í™œì„±í™”
        else:
            print("ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹")
    client_socket.close()
```

- íšŒì „ìë™ëª¨ë“œ ë¼ì¦ˆë² ë¦¬ íŒŒì´ëŠ” TCP ì„œë²„ë¡œ ì‘ë™í•˜ì—¬ ë©”ì¸ ì„œë²„ë¡œë¶€í„° '1' ë˜ëŠ” '0'ì„ ìˆ˜ì‹ í•˜ê³ , ì´ì— ë”°ë¼ ì–¼êµ´ ì¸ì‹ ë° íŒ¬-í‹¸íŠ¸ ë©”ì»¤ë‹ˆì¦˜ ì œì–´ë¥¼ í™œì„±í™”í•˜ê±°ë‚˜ ë¹„í™œì„±í™”í•œë‹¤.

### 2. RaspberryPi-SmartPhone í†µì‹  
> ### UARTí†µì‹ ì„ í†µí•œ ìŠ¤ë§ˆíŠ¸í° í†µì‹  ë° IPC í†µì‹ 
```c
unsigned char serialRead(const int fd) {
    unsigned char x;
    if (read(fd, &x, 1) != 1)
        return -1;
    return x;
}
bool isExistMode(const int fd_serial, const char *isExistmode) {
    char mode = isExistmode[0];
    char value = isExistmode[1] - '0';
    char output[50];

    switch (mode) {
        case 'Q':
            sprintf(output, "ì¢…ë£Œ\n");
            serialWriteString(fd_serial, output);
            return true;
        case 'T':
            if(value == AUTO)
                sprintf(output, "íƒ€ì´ë¨¸ëª¨ë“œ : ìë™\n");
            else
                sprintf(output, "íƒ€ì´ë¨¸ëª¨ë“œ : %dë¶„\n", value * 10);
            serialWriteString(fd_serial, output);
            return true;
        case 'R':
            if(value == AUTO)
                sprintf(output, "íšŒì „ëª¨ë“œ : ìë™\n");
            else
                sprintf(output, "íšŒì „ëª¨ë“œ : %dë‹¨\n", value);
            serialWriteString(fd_serial, output);
            return true;
        case 'P':
            if(value == AUTO)
                sprintf(output, "ì†ë„ëª¨ë“œ : ìë™\n");
            else
                sprintf(output, "ì†ë„ëª¨ë“œ ì„¤ì • : %dë‹¨\n", value);
            serialWriteString(fd_serial, output);
            return true;
        default:
            return false;
    }
}
int main() {
    int fd_serial;
    unsigned char dat, dat2;
    mqd_t mq;
    struct mq_attr attr;
    char message[MAX_MSG_SIZE];

    attr.mq_flags = 0;
    attr.mq_maxmsg = 10;
    attr.mq_msgsize = MAX_MSG_SIZE;
    attr.mq_curmsgs = 0;

    mq = mq_open(MQ_NAME, O_CREAT | O_WRONLY, 0644, &attr);
    if (mq == (mqd_t)-1) {
        perror("mq_open");
        return 1;
    }

    if (wiringPiSetup() < 0)
        return 1;

    if ((fd_serial = serialOpen(UART2_DEV, BAUD_RATE)) < 0) {
        printf("Unable to open serial device.\n");
        return 1;
    }

    while (1) {
        if (serialDataAvail(fd_serial)) {
            dat = serialRead(fd_serial);
            if (serialDataAvail(fd_serial)) {
                dat2 = serialRead(fd_serial);
                sprintf(message, "%c%c", dat, dat2);

                if (isExistMode(fd_serial, message)) {
                    if (mq_send(mq, message, 2, 0) == -1) {
                        perror("mq_send");
                    }
                }
            }
        }
        delay(10);
    }

    mq_close(mq);
    return 0;
}
```
- UARTí†µì‹ ì„ í†µí•˜ì—¬ `serialRead`í•¨ìˆ˜ë¡œ 2ë°”ì´íŠ¸ì”© ë°ì´í„°ë¥¼ ì½ëŠ”ë‹¤. 
- ë°›ì€ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ `isExistMode` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ëª¨ë“œì™€ Amountë¥¼ í™•ì¸í•œë‹¤.
- í•´ë‹¹ ëª¨ë“œì— ë”°ë¼ ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ìŠ¤ë§ˆíŠ¸í°ì— ì „ì†¡í•˜ê³ , ë©”ì‹œì§€ íì— ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.
  
### 3. RaspberryPi-PC(Web) í†µì‹ 
- ì‚¬ìš© ê¸°ìˆ 
    - Node.js
    - Express
> ### express ì„œë²„ ê¸°ë³¸ ì„¤ì •
```javascript
// service_1/node-server/app.js

// express moudleì„ ë¡œë“œ.
const express = require('express');
const app = express();


// routerë¡œ ë§Œë“¤ì–´ë‘” API ë¡œë“œ
const api = require('./api');

app.use(express.json());

// '/api/v1/* ë¡œ api ì¸í„°í˜ì´ìŠ¤ ì„¤ì • 
app.use('/api/v1', api);

app.use(express.static('public'));

// '/'ì—ì„œ ì œì‘í•œ hmtl íŒŒì¼ì„ ì œê³µë°›ì„ ìˆ˜ ìˆë„ë¡ ì„¤ì •
app.get('/', (req, res) => {
  res.sendFile(__dirname + '/public/index.html');
});

app.listen(3000, () => {
  console.log('server is running on port 3000');
});

```
- ë¯¸ë¦¬ êµ¬í˜„í•œ APIë¥¼ ì‚¬ìš©í•´ì„œ, ê° ê¸°ëŠ¥ë“¤ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.
  
> ### child_processë¥¼ ì‚¬ìš©í•œ C ì‹¤í–‰
```javascript
const { exec } = require('child_process');

// service_1/node-server/module/util.js 63:84

/**
 * run process
 * @param {*} type power, rotation, timer
 * @param {*} mode on, off, auto
 */
function runProcess(type, mode) {
  exec(`sudo ./web_command_exec ${type}${mode}`, (err, stdout, stderr) => {
    if (err) {
      console.log(err);
      return;
    }
    console.log(stdout);
  });
}

module.exports = {
  getData,
  setData,
  runProcess
};
```
- Node.jsì—ì„œ mqë¡œ ì „ë‹¬ë°›ì€ ë©”ì‹œì§€ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´, execë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.
  
> ### ì›¹ í™˜ê²½ì—ì„œ API í˜¸ì¶œ
```javascript
 // service_1/node-server/public/script.js 32:38

fetch('/api/v1/power', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({ power }),
});
```
- fetchë¥¼ ì‚¬ìš©í•˜ì—¬, APIë¥¼ í˜¸ì¶œí•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.

```javascript
// service_1/node-server/api.js 27:36

router.post('/power', (req, res) => {
  const power = req.body.power;
  try{
    runProcess('P', power);
  }
  catch(e){
    res.send({error: e})
  }
  res.send({power})
});

```
- í˜¸ì¶œë°›ì€ APIì—ì„œ ì „ë‹¬ë°›ì€ ë©”ì‹œì§€ë¥¼ íŒŒì‹±í•˜ì—¬, execë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.

## ì¶”ê°€ ê¸°ìˆ  í™œìš© : ì–¼êµ´ ì¸ì‹ ê¸°ìˆ ì„ í™œìš©í•œ íšŒì „ ìë™ ëª¨ë“œì˜ êµ¬í˜„

- ì‹ ê²½ë§ ê¸°ë°˜ì˜ íƒì§€ê¸°ì™€ íŒ¬-í‹¸íŠ¸ ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ ì–¼êµ´ì„ ì •í™•í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ê°ì§€í•˜ê³ , ì¹´ë©”ë¼ ë°©í–¥ì„ ë™ì ìœ¼ë¡œ ì¡°ì ˆí•œë‹¤. 
- ì´ ê¸°ëŠ¥ì€ ì‚¬ìš©ìì˜ ì–¼êµ´ì„ í™”ë©´ ì¤‘ì•™ì— ìœ ì§€í•˜ë©°, ì‹¤ì‹œê°„ ì²˜ë¦¬ ê¸°ëŠ¥ì„ í†µí•´ ì›í™œí•˜ê³  ë¹ ë¥¸ ë°˜ì‘ì„ ì œê³µí•œë‹¤.
- íŠ¹íˆ, ë©€í‹° ì“°ë ˆë”©ê³¼ ì†Œì¼“ ê¸°ë°˜ ì„œë²„ë¥¼ í™œìš©í•œ ì›ê²© ì œì–´ ê¸°ëŠ¥ì´ í•µì‹¬ì´ë‹¤.

> ### ì‹ ê²½ë§ ê¸°ë°˜ ì–¼êµ´ íƒì§€

```python
// service_2/rotate_auto_server.py 166:173

# Caffe ëª¨ë¸ì„ ì‚¬ìš©í•œ ì‹ ê²½ë§ ê¸°ë°˜ ì–¼êµ´ íƒì§€
detector = cv2.dnn.readNetFromCaffe("deploy.prototxt.txt", "res10_300x300_ssd_iter_140000.caffemodel")
frame = cv2.resize(frame, (300, 300))
blob = cv2.dnn.blobFromImage(frame, 1.0, (300, 300), (104.0, 177.0, 123.0))
detector.setInput(blob)
detections = detector.forward()
```

- OpenCVì˜ DNN ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ Caffe í”„ë ˆì„ì›Œí¬ì—ì„œ í›ˆë ¨ëœ ì‹ ê²½ë§ ëª¨ë¸ì„ ë¡œë“œí•œë‹¤. ì´ ëª¨ë¸ì€ ì¹´ë©”ë¼ì—ì„œ ìº¡ì²˜ëœ í”„ë ˆì„ì„ ì²˜ë¦¬í•˜ì—¬ ì–¼êµ´ì„ ê°ì§€í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.

> ### íŒ¬-í‹¸íŠ¸ ë©”ì»¤ë‹ˆì¦˜ ì œì–´

```python
// service_2/rotate_auto_server.py 174:180

# íŒ¬(ìˆ˜í‰ íšŒì „)ê³¼ í‹¸íŠ¸(ìˆ˜ì§ íšŒì „) ê°ë„ ê³„ì‚° ë° ì¡°ì ˆ
tiltAngle = (objX * 0.2) + move_x
panAngle = (objY * 0.2) + move_y
if in_range(tiltAngle, servoRange[0], servoRange[1]):
    pth.tilt(tiltAngle)
if in_range(panAngle, servoRange[0], servoRange[1]):
    pth.pan(panAngle)
```

- ê°ì§€ëœ ì–¼êµ´ì˜ ìœ„ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒ¬ê³¼ í‹¸íŠ¸ì˜ ê°ë„ë¥¼ ê³„ì‚°í•œë‹¤. ì´ë¥¼ í†µí•´ ì¹´ë©”ë¼ê°€ ì‚¬ìš©ìì˜ ì–¼êµ´ì„ í™”ë©´ ì¤‘ì•™ì— ìœ ì§€í•˜ë„ë¡ ì¡°ì ˆí•œë‹¤.

> ### ë©€í‹° ì“°ë ˆë”© ê¸°ìˆ  í™œìš©

```python
// service_2/rotate_auto_server.py 181:184

# ì–¼êµ´ íƒì§€ ë° ì„œë³´ ì œì–´ ì“°ë ˆë“œ ì‹œì‘
processObjectCenter = threading.Thread(target=obj_center, args=(args,))
processObjectCenter.start()

# íŒ¬-í‹¸íŠ¸ ì œì–´ ì“°ë ˆë“œ ì‹œì‘
servoControl = threading.Thread(target=set_servos)
servoControl.start()
```

- ë©€í‹° ì“°ë ˆë”©ì„ ì´ìš©í•˜ì—¬ ì–¼êµ´ íƒì§€, íŒ¬-í‹¸íŠ¸ ë©”ì»¤ë‹ˆì¦˜ ì œì–´, ì†Œì¼“ ì„œë²„ í†µì‹  ë“±ì„ ë™ì‹œì— ìˆ˜í–‰í•œë‹¤. ì´ë¥¼ í†µí•´ ê° ê¸°ëŠ¥ì´ ì„œë¡œ ë°©í•´ë°›ì§€ ì•Šê³  íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‘í•˜ë©°, ì‹œìŠ¤í…œì˜ ì „ì²´ì ì¸ ë°˜ì‘ ì†ë„ì™€ ì•ˆì •ì„±ì„ í–¥ìƒì‹œí‚¨ë‹¤.

> ### ì†Œì¼“ ê¸°ë°˜ ì„œë²„ë¥¼ í†µí•œ ì›ê²© ì œì–´

```python
// service_2/rotate_auto_server.py 185:187

# ì†Œì¼“ ì„œë²„ ì´ˆê¸°í™” ë° ì„¤ì •
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind((host, port))
server_socket.listen(1)
```

- ì„œë²„ ì†Œì¼“ì„ ì´ˆê¸°í™”í•˜ì—¬ íŠ¹ì • í¬íŠ¸ì—ì„œ ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦°ë‹¤. í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ëª…ë ¹ì„ í†µí•´ ì‹œìŠ¤í…œì„ ì œì–´í•œë‹¤.

> ### ìë™ ëª¨ë“œ ì‹¤í–‰ê³¼ ì¤‘ì§€

```python
// service_2/rotate_auto_server.py 188:195

if data == '1':
    obj_tracking_running = True
    # ì“°ë ˆë“œ ì‹œì‘ ë¡œì§
elif data == '0':
    obj_tracking_running = False
    # íŒ¬-í‹¸íŠ¸ ë©”ì»¤ë‹ˆì¦˜ ì´ˆê¸°í™” ë° ì–¼êµ´ íƒì§€ ê¸°ëŠ¥ ì¤‘ì§€ ë¡œì§
```

- í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° '1' ëª…ë ¹ì„ ë°›ìœ¼ë©´ ìë™ íšŒì „ ëª¨ë“œë¥¼ ì‹œì‘í•œë‹¤. ì´ ëª¨ë“œì—ì„œëŠ” ì–¼êµ´ íƒì§€ì™€ íŒ¬-í‹¸íŠ¸ ì¡°ì ˆì´ í™œì„±í™”ë˜ì–´ ì‚¬ìš©ìì˜ ì–¼êµ´ì„ í™”ë©´ ì¤‘ì•™ì— ìœ ì§€í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° '0' ëª…ë ¹ì„ ë°›ìœ¼ë©´ ìë™ íšŒì „ ëª¨ë“œë¥¼ ì¤‘ì§€í•œë‹¤. ì´ë•Œ, íŒ¬-í‹¸íŠ¸ ë©”ì»¤ë‹ˆì¦˜ì€ ì´ˆê¸° ìœ„ì¹˜ë¡œ ëŒì•„ê°€ê³ , ì–¼êµ´ íƒì§€ ê¸°ëŠ¥ë„ ë¹„í™œì„±í™”ëœë‹¤.



## ğŸ“– ì‹¤í–‰ ë°©ë²•

> ### Remote controller
ë¼ì¦ˆë² ë¦¬íŒŒì´-ë¼ì¦ˆë² ë¦¬íŒŒì´ ê°„ì˜ TCP ì—°ê²°ì„ ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ 
- ì»´íŒŒì¼
```bash
$ gcc -o remote_client remote_client.c -lwiringPi # ë¦¬ëª¨ì»¨ í´ë¼ì´ì–¸íŠ¸
```

- ì‹¤í–‰
```bash
$ sudo ./remote_client # ë¦¬ëª¨ì»¨ í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰
```
> ### Service 1
ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ìš”ì²­ì„ ë°›ëŠ” ë©”ì¸ì„œë²„
- ì»´íŒŒì¼
```bash
$ gcc -o main_server main_server.c -lrt -lwiringPi -lpthread  # ë©”ì¸ ì„œë²„
$ gcc -o dht_sensor dht_sensor.c -lrt -lwiringPi - lpthread # ì˜¨ìŠµë„ ì„¼ì„œ
$ gcc -o ultrasonic_sensor ultrasonic_sensor.c -lrt -lwiringPi -lpthread # ì´ˆìŒíŒŒ ì„¼ì„œ
$ gcc -o bluetooth bluetooth.c -lrt -wiringPi # ë¸”ë£¨íˆ¬ìŠ¤ UARTí†µì‹  ì„¼ì„œ
$ gcc -o server_exec server_exec.c -lrt # Web í†µì‹  ì„œë²„
$ gcc -o TCP_controlelr_connect TCP_controller_connect.c -lrt # Controllerì™€ ì—°ê²°í•˜ê¸° ìœ„í•œ ì„œë²„
$ gcc -o TCP_rotate_connect TCP_rotate_connect.c -lrt -lwiringPi # Service2 ì™€ ì—°ê²°í•˜ê¸° ìœ„í•œ ì„œë²„
```

- ì‹¤í–‰
```bash
$ sudo ./main_server # ë©”ì¸ì„œë²„ ì‹¤í–‰
$ sudo ./bluetooth # UART í†µì‹  ì„œë²„ ì‹¤í–‰
$ sudo ./TCP_controlelr_connect # Controller ì™€ í†µì‹ ì„œë²„ ì‹¤í–‰
$ sudo ./TCP_rotate_connect # Service2 ì™€ ì—°ê²°í•˜ê¸° ìœ„í•œ ì„œë²„ ì‹¤í–‰
```

- node server ì‹¤í–‰
```bash
$ cd service_1/node-server/
$ sudo node app.js
```

> ### Service 2
ë©”ì¸ì„œë²„ë¡œ ë¶€í„° íšŒì „ìë™ëª¨ë“œ ìš”ì²­ì„ ë°›ëŠ” íšŒì „ìë™ëª¨ë“œ(ì–¼êµ´ì¸ì‹) ì„œë²„
- ì‹¤í–‰
```bash
$ python3 rotate_auto_server.py # íšŒì „ìë™ëª¨ë“œ ì„œë²„ ì‹¤í–‰
```

<br/>

## ğŸ’» ì¡°ì‘ ë°©ë²•
- ì‚¬ìš©ìëŠ” `Controller` `SmartPhone` `Web`ì„ í†µí•´ ê°’ì„ Serverì—ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
- í†µì‹ ì€ `Mode` + `Amount` ë¡œ ê°’ì„ Serverì—ê²Œ ì „ë‹¬í•œë‹¤.
- Modeì—ëŠ” `P`, `R`, `T` ê°€ ìˆë‹¤.
  - `Power Mode(P)`  : íŒŒì›Œëª¨ë“œë¡œ ì„¸ê¸°ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.
    - Amount : 0, 1, 2 , A  
  - `Rotate Mode(R)` : íšŒì „ëª¨ë“œë¡œ íšŒì „ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.
    - Amount : 0 , 1 , A
  - `Timer Mode(T)`  : íƒ€ì´ë¨¸ëª¨ë“œë¡œ ì¢…ë£Œì‹œê°„ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.
    - Amount : 0-9
- ì˜ˆì‹œ
  - íŒŒì›Œ ëª¨ë“œ 2 ì„¤ì •: `P2`
  - íšŒì „ ëª¨ë“œ Auto ì„¤ì •: `RA`
  - íƒ€ì´ë¨¸ ëª¨ë“œ 5 ì„¤ì •: `T5`



## ğŸ“† í”„ë¡œì íŠ¸ ì¼ì •
<img width="1850" alt="image" src="https://github.com/bini59/Smart-Embedded-Fan/assets/46300191/5013e793-ded0-4d70-8035-9186d639e9df">

## ğŸ± ìµœì¢… ê²°ê³¼ë¬¼

<img src="https://github.com/bini59/Smart-Embedded-Fan/assets/46300191/b5d65aa8-2b0f-441e-9ef1-2cf576802aac" width="500" height="700"/>
<img src="https://github.com/bini59/Smart-Embedded-Fan/assets/46300191/36b4cf98-d1c9-4f2b-a777-fd322ced3894" width="500" height="700"/>

## ğŸ¥ ì‹œì—° ì—°ìƒ
<a href="https://www.youtube.com/watch?v=0BBzzAZkF_s">
    <img src="http://img.youtube.com/vi/0BBzzAZkF_s/0.jpg" width="100%" />
</a>
> ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ë©´ ìœ íŠœë¸Œë¡œ ì´ë™

## ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ íŒ€ ëª…ë‹¨
| Profile | Role | Part |
| ------- | ---- | ---- |
| <div align="center"><a href="https://github.com/joon6093"><img src="https://avatars.githubusercontent.com/u/118044367?v=4" width="70px;" alt=""/><br/><sub><b>ì†¡ì œìš©</b><sub></a></div> | íŒ€ì¥ | ì—­í•  ë°°ë¶„ ë° ì¼ì • ê´€ë¦¬, ë¦¬ëª¨ì»¨ ì œì–´ ë° ìƒíƒœ í‘œì‹œ ê¸°ëŠ¥ ê°œë°œ, ê°ì²´ ì¸ì‹ ë° ì¶”ì  ê¸°ëŠ¥ ê°œë°œ  |
| <div align="center"><a href="https://github.com/bini59"><img src="https://avatars.githubusercontent.com/u/51144791?v=4" width="70px;" alt=""/><br/><sub><b>ì„ìœ ë¹ˆ</b></sub></a></div> | íŒ€ì› | Node.js, Expressë¥¼ ì´ìš©í•œ ì„œë²„ ê°œë°œ. Main Serverì˜ Multi Process, Thread ë° Mutex êµ¬í˜„. |
| <div align="center"><a href="https://github.com/Sonny-Kor"><img src="https://github.com/bini59/Smart-Embedded-Fan/assets/46300191/3929f0b1-1bc3-4444-af1f-9896de0d9497" width="70px;" alt=""/><br/><sub><b>ì†ìŠ¹ì¬</b></sub></a></div> | íŒ€ì› | í”„ë¡œì„¸ìŠ¤ê°„ POSIX IPC(ë©”ì‹œì§€ í)í†µì‹  êµ¬í˜„, ëª¨í„° ë° ì„¼ì„œ êµ¬í˜„ , ë¸”ë£¨íˆ¬ìŠ¤ ëª¨ë“ˆ í†µì‹  êµ¬í˜„ | 
| <div align="center"><a href="https://github.com/..."><img src="..." width="70px;" alt=""/><br/><sub><b>ë°•ì„±í˜„</b></sub></a></div> | íŒ€ì› | ... | 


## âœğŸ» í”„ë¡œì íŠ¸ í›„ê¸°
> ### ì†¡ì œìš©
&nbsp;ì œì•ˆ ë°œí‘œ ì‹œ êµìˆ˜ë‹˜ì˜ í”¼ë“œë°±ì„ ë°›ê³  ìš¸íŠ¸ë¼ì†Œë‹‰ ì„¼ì„œì˜ í•œê³„ë¥¼ ê¹¨ë‹«ê³ , íŒ¬-í‹¸íŠ¸ë¥¼ ì´ìš©í•œ ì–¼êµ´ ì¸ì‹ìœ¼ë¡œ ì‚¬ìš©ì ì›€ì§ì„ ì¶”ì  ë°©í–¥ìœ¼ë¡œ ì „í™˜í–ˆë‹¤. íŠ¹íˆ, ì“°ë ˆë”©ì„ ì´ìš©í•´ ì–¼êµ´ ì¸ì‹ê³¼ íŒ¬-í‹¸íŠ¸ ë©”ì»¤ë‹ˆì¦˜ì„ ì œì–´í•˜ëŠ” ê³¼ì •ì´ ì–´ë ¤ì› ë‹¤. ì–¼êµ´ íƒì§€ í”„ë ˆì„ê³¼ íŒ¬-í‹¸íŠ¸ ì œì–´ í”„ë ˆì„ì´ ê²¹ì³ì„œ ì˜ëª»ëœ ë°©í–¥ìœ¼ë¡œ ì›€ì§ì´ëŠ” ë¬¸ì œë¥¼ ì‹œê°„ ì œì–´ë¡œ í•´ê²°í–ˆë‹¤.

&nbsp;ë¦¬ëª¨ì»¨ ë¼ì¦ˆë² ë¦¬ íŒŒì´ ê°œë°œì„ í†µí•´ ì„ë² ë””ë“œ ê°œë°œì— ëŒ€í•œ ì§€ì‹ì´ í–¥ìƒë˜ì—ˆê³ , ì–¼êµ´ ì¸ì‹ ë¼ì¦ˆë² ë¦¬ íŒŒì´ì™€ ë¦¬ëª¨ì»¨ ë¼ì¦ˆë² ë¦¬ íŒŒì´ ëª¨ë‘ ë©”ì¸ ì„œë²„ì™€ TCP í†µì‹ ì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— TCPì— ëŒ€í•œ ì´í•´ë„ê°€ ë†’ì•„ì¡Œë‹¤.

&nbsp;ëŒ€ëµ 10ì¼ì´ë¼ëŠ” ì§§ì€ ê¸°ê°„ ë™ì•ˆ ì´ í”„ë¡œì íŠ¸ë¥¼ ì™„ì„±í–ˆì§€ë§Œ, êµ¬í˜„ ë‚´ìš©ì„ ëŒì´ì¼œë³´ë©´ ì–´ë–»ê²Œ ì´ë ‡ê²Œ êµ¬í˜„í–ˆëŠ”ì§€ ì˜ë¬¸ìŠ¤ëŸ¬ìš¸ ì •ë„ë¡œ ì˜ í•´ë‚¸ ê²ƒ ê°™ë‹¤. 10ì¼ í”„ë¡œì íŠ¸ì¹˜ê³  ë§¤ìš° ë†’ì€ ìˆ˜ì¤€ì˜ êµ¬í˜„ì„ í–ˆë‹¤ê³  ìƒê°í•œë‹¤. íŒ€ì›ë“¤ ê°ìê°€ ìì‹ ì˜ ì—­í• ì„ ì •í™•íˆ ìˆ˜í–‰í•œ ë•ë¶„ì— ì´ë ‡ê²Œ ì¢‹ì€ ê²°ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆì—ˆë‹¤ê³  ìƒê°í•œë‹¤.

> ### ì„ìœ ë¹ˆ
&nbsp;í”„ë¡œì íŠ¸ë¥¼ í•´ì•¼í•œë‹¤ëŠ” ê²ƒì„ ì „ë‹¬ ë°›ì€ í›„, ì„ í’ê¸°ë¥¼ ê°œë°œí•œë‹¤ëŠ” ì•„ì´ë””ì–´ë¥¼  ë“¤ì—ˆë‹¤. ë‚˜ëŠ” ì›¹ ê°œë°œìì˜ ì…ì¥ìœ¼ë¡œì„œ, ì„ í’ê¸°ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì œì–´í•˜ëŠ” ë°©ì‹ì´ ë°”ë¡œ ë¨¸ë¦¬ì†ì— ë– ì˜¬ëë‹¤. 

&nbsp;ì»´í“¨í„°ê³µí•™ê³¼ì— ì…í•™í•  ë‹¹ì‹œ, í˜„ì‹¤ì˜ ë¬¼ê±´ì„ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì œì–´í•´ ìë™í™” í•˜ëŠ”ê²ƒì„ ê¿ˆê¾¸ë©° ì…í•™í–ˆì—ˆë‹¤. ê·¸ ë§Œí¼ ë” ì—´ì •ì´ ìƒê²¼ë‹¤. ë˜í•œ, ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©°, child-process moduleì„ ì´ìš©í•´ì„œ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í–ˆë‹¤. í‰ì†Œì—ëŠ” ì‚¬ìš©í•  ì¼ì´ ì—†ì–´ì„œ ì²˜ìŒ ì‚¬ìš©í•´ë³´ì•˜ë‹¤. ì‚¬ìš©í•˜ë©´ì„œ ê¸°ì¡´ ì§„í–‰í–ˆë˜ í”„ë¡œì íŠ¸ë„ ìœ„ì˜ ëª¨ë“ˆì„ ì‚¬ìš©í•´ì„œ ë‹¨ì¼ í”„ë¡œê·¸ë¨ì˜ ê·œëª¨ë¥¼ ì¢€ ë” ì‘ê²Œ ìœ ì§€í•  ìˆ˜ ìˆì§€ ì•Šì•˜ì„ê¹Œ. ì¢€ ë” ìƒê°ì˜ í­ì„ ë„“í ìˆ˜ ìˆì—ˆë˜ í”„ë¡œì íŠ¸ ì˜€ë‹¤ê³  ìƒê°í•œë‹¤. 

&nbsp;ë˜í•œ ë§ì€ ë¶€ë¶„ì—ì„œ íŒ€ì›ë“¤ì˜ í˜‘ë ¥ì´ ìˆì—ˆê¸°ì— ì´ í”„ë¡œì íŠ¸ê°€ ì™„ì„±ë  ìˆ˜ ìˆì—ˆë‹¤ê³  ìƒê°í•œë‹¤. ë¦¬ëª¨ì»¨ê³¼, ì¸ê³µì§€ëŠ¥, ì‹¤ì œ ì„ í’ê¸°ì˜ ê¸°ë™, í•˜ë“œì›¨ì–´ ì—°ê²° ë“±ì€ ë‹¤ë¥¸ íŒ€ì›ë“¤ì´ ë§¡ì•„ì„œ ì§„í–‰ í•˜ì˜€ë‹¤. í•˜ë“œì›¨ì–´ëŠ” ë¬¼ë¡ , ì½”ë“œë„ ì˜¤ë¥˜ ì—†ì´ ê°€ë…ì„±ì´ ì¢‹ë„ë¡ êµ¬í˜„í•˜ì—¬ ì£¼ì–´ì„œ, ì½”ë“œë¥¼ í†µí•©í•˜ëŠ” ê³¼ì •ì—ì„œë„ í° ì–´ë ¤ì›€ì´ ì—†ì´ í†µí•©í•  ìˆ˜ ìˆì—ˆë‹¤. 10ì¼ê°„ ì§§ì€ ê¸°ê°„ì˜ í˜‘ì—…ì´ì—ˆì§€ë§Œ, ê¸°ê°„ ë‚´ì—ì„œ í•´ë‚¼ ìˆ˜ ìˆëŠ” ìµœëŒ€í•œì˜ ê²°ê³¼ë¬¼ì´ ë‚˜ì™”ë‹¤ê³  ìì‹ í•œë‹¤.
> ### ì†ìŠ¹ì¬
&nbsp; ì´ë²ˆ í”„ë¡œì íŠ¸ëŠ” íŒ€ì¥ë‹˜ì˜ ì°½ì˜ì ì¸ ìƒê°ê³¼ ë‚˜ë¨¸ì§€ íŒ€ì›ë“¤ì˜ ì˜ê²¬ì´ í•©ì³ì ¸ ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆì—ˆë‹¤. ëª¨ë‘ê°€ ê°ìì˜ ë¶€ë¶„ì„ í›Œë¥­í•˜ê²Œ êµ¬í˜„í•´ì£¼ì–´ì„œ í”„ë¡œì íŠ¸ì˜ ê²°ê³¼ë¬¼ì´ ì¢‹ì•˜ë˜ ê²ƒ ê°™ë‹¤.

&nbsp; ê°€ì¥ ë¨¼ì €, ëª¨ë“  íŒ€ì›ë“¤ì—ê²Œ ê°ì‚¬ì˜ ë§ì„ ì „í•˜ê³  ì‹¶ë‹¤. ì†¡ì œìš©ë‹˜ì€ ì €ì—ê²Œ í‰ì†Œì— ì‚¬ìš©í•  ì¼ì´ ì—†ì—ˆë˜ POSIX IPC ë©”ì‹œì§€ íë¥¼ ì´ìš©í•œ í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹  êµ¬ì¡°ë¥¼ ì˜ ì„¤ê³„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ì—ˆë‹¤. ì„œë²„-í´ë¼ì´ì–¸íŠ¸ êµ¬ì¡°ì— ëŒ€í•œ ì§€ì‹ì´ ë¶€ì¡±í–ˆëŠ”ë°, raspberry, bluetooth, Web ì´ 3ê°€ì§€ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í†µì‹ ì„ í• ìˆ˜ìˆë„ë¡ ì„¤ê³„ë¥¼ ë„ì™€ì£¼ì…¨ë‹¤. ì†¡ì œìš© ì”¨ ë•ë¶„ì— ë§ì€ ê²ƒì„ ë°°ìš¸ ìˆ˜ ìˆì—ˆë‹¤.

&nbsp; í˜¼ìì„œ ë©”ì¸ì„œë²„ì—ì„œ ì„¼ì„œì˜ ê°’ì„ ì“°ë ˆë“œë¡œ êµ¬í˜„í•˜ì˜€ì„ ë•Œ ì œëŒ€ë¡œ ê°’ì´ ì½íˆì§€ì•ŠëŠ” ì–´ë ¤ì›€ì„ ê²ªì—ˆëŠ”ë°, ì„ìœ ë¹ˆë‹˜ê»˜ì„œ child-process ëª¨ë“ˆì„ í™œìš©í•´ ì´ ë¬¸ì œë¥¼ í•´ê²°í•´ì£¼ì—ˆë‹¤. ì„¼ì„œì˜ ê°’ì„ ì½ì–´ì˜¤ëŠ” ë¶€ë¶„ì—ì„œ ê¸°ìˆ ì  ë‚œê´€ì„ ê·¹ë³µí•  ìˆ˜ ìˆì—ˆë‹¤. íšŒë¡œë¥¼ ì„¤ê³„í•˜ê³  ì„ í’ê¸°ë¥¼ ì‹¤ì œë¡œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ë©‹ì§€ê²Œ ë§Œë“¤ì–´ì£¼ì‹  ë°•ì„±í˜„ë‹˜ì—ê²Œë„ ê°ì‚¬í•˜ë‹¤.

&nbsp;ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ í˜‘ë ¥ì˜ ì¤‘ìš”ì„±ê³¼ ì˜ë¯¸ë¥¼ ê¹Šì´ ê¹¨ë‹¬ì•˜ë‹¤. ì²˜ìŒì— í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê²Œ ë˜ì—ˆì„ ë•Œ, 10ì¼ì•ˆì— ì´ í”„ë¡œì íŠ¸ë¥¼ ë§ˆë¬´ë¦¬ í•  ìˆ˜ ìˆì„ê¹Œ? ë¼ëŠ” ê±±ì •ì´ ì»¸ì—ˆë‹¤. í•˜ì§€ë§Œ íŒ€ì›ë“¤ ê°„ì˜ í˜‘ë ¥ ë•ë¶„ì— ë¹ ë¥´ê²Œ í”„ë¡œì íŠ¸ë¥¼ ë§ˆë¬´ë¦¬í•  ìˆ˜ ìˆì—ˆê³ , ê²°ê³¼ë¬¼ë„ ìµœê³ ë¼ê³  ìƒê°í•˜ë©° ë§ì€ ê¸°ìˆ ì ì¸ ë¶€ë¶„ì— ëŒ€í•´ì„œ ë°°ì› ë‹¤. í”„ë¡œì íŠ¸ì— ì°¸ì—¬í•œ íŒ€ì›ë“¤ì—ê²Œ ë‹¤ì‹œ í•œë²ˆ ê°ì‚¬ì˜ ë§ˆìŒì„ ì „í•œë‹¤.

> ### ë°•ì„±í˜„
